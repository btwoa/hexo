<!DOCTYPE html><html lang=zh-CN><head><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><title>为小米路由器4C刷入固件 | OpenWRT | Blog | btwoa</title><meta name=description content="为小米路由器4C刷入固件 | OpenWRT | btwoa"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://ovo.btwoa.com/favicon/hexo/favicon.png><link rel=stylesheet href=/css/apollo.css><link rel=search type=application/opensearchdescription+xml href=https://blog.btwoa.com/atom.xml title="Blog | btwoa"><script integrity=sha384-MWfCL6g1OTGsbSwfuMHc8+8J2u71/LA8dzlIN3ycajckxuZZmF+DNjdm7O6H3PSq src=//instant.page/5.1.1 type=module></script><!-- hexo injector head_end start --><link rel=manifest href=/manifest.json><!-- hexo injector head_end end --><meta name=generator content="Hexo 6.2.0"><link rel=alternate href=/atom.xml title="Blog | btwoa" type=application/atom+xml><link rel=alternate href=/rss.xml title="Blog | btwoa" type=application/rss+xml></head><body><div class=container data-bs-spy=scroll data-bs-target=#toc-nav data-bs-offset=0></div><div class=wrap><header><a class=logo-link href=/ ><img src=https://ovo.btwoa.com/blog.webp alt=logo></a><ul class="nav nav-list"><li class=nav-list-item><a class=nav-list-link href=https://btwoa.com target=_blank>主页</a></li><li class=nav-list-item><a class=nav-list-link href=/talk/ target=_self>说说</a></li><li class=nav-list-item><a class=nav-list-link href=/circle/ target=_self>小圈</a></li><li class=nav-list-item><a class=nav-list-link href=/link/ target=_self>友链</a></li><li class=nav-list-item><a class=nav-list-link href=/archives/ target=_self>归档</a></li><li class=nav-list-item><a class=nav-list-link href=https://monitor.btwoa.com target=_blank>监测</a></li></ul></header><main class=container><article class=post-block><h1 class=post-title>为小米路由器4C刷入固件 | OpenWRT</h1><div class=post-info>2022年3月10日<div class=post-tags><a class=post-tag-link href=/tags/BREED/ rel=tag># BREED</a> <a class=post-tag-link href=/tags/OpenWRT/ rel=tag># OpenWRT</a></div></div><div class=post-toc><h3 class=post-toc-title>为小米路由器4C刷入固件 | OpenWRT</h3><nav class=navbar id=toc-nav><ol class=nav><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%8E%B7%E5%8F%96root%E6%9D%83%E9%99%90><span class=nav-text>获取root权限</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#telnet-%E8%BF%9E%E6%8E%A5><span class=nav-text>telnet 连接</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%A4%87%E4%BB%BD%E5%88%86%E5%8C%BA><span class=nav-text>备份分区</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%88%B7%E5%85%A5-OpenWRT><span class=nav-text>刷入 OpenWRT</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%93%8D%E4%BD%9C><span class=nav-text>第一种操作</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%A4%8D%E4%BD%8D%E5%90%AF%E5%8A%A8%E8%BF%9B%E5%85%A5-BREED><span class=nav-text>复位启动进入 BREED</span></a></li><li class="nav-item nav-level-4"><a class=nav-link href=#%E6%81%A2%E5%A4%8D%E5%AE%98%E6%96%B9%E5%9B%BA%E4%BB%B6><span class=nav-text>恢复官方固件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class=nav-link href=#openwrt-%E5%AE%98%E7%BD%91%E6%AD%A5%E9%AA%A4><span class=nav-text>openwrt 官网步骤</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#openwrt-%E4%B8%BB%E9%A2%98><span class=nav-text>openwrt 主题</span></a></li></ol></li></ol></li></ol></nav></div><div class=post-content><p>使用两种方法为小米路由器4C刷入OpenWRT</p><span id=more></span><h2 id=获取root权限><a href=#获取root权限 class=headerlink title=获取root权限></a>获取root权限</h2><p><a target=_blank rel=noopener href=https://github.com/acecilia/OpenWRTInvasion>Github项目地址</a></p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>git clone https://github.com/acecilia/OpenWRTInvasion.git</span><br></pre></td></tr></table></figure><p><img src=https://ovo.btwoa.com/img/webp/202203102005109.webp></p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>cd OpenWRTInvasion</span><br><span class=line></span><br><span class=line>py -3 -m pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p><img src=https://ovo.btwoa.com/img/webp/202203102039844.webp></p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>py -3 remote_command_execution_vulnerability.py</span><br></pre></td></tr></table></figure><p><img src=https://ovo.btwoa.com/img/webp/202203102155179.webp></p><p><img src=https://ovo.btwoa.com/img/webp/202203102203706.webp></p><h2 id=telnet-连接><a href=#telnet-连接 class=headerlink title="telnet 连接"></a>telnet 连接</h2><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>telnet 192.168.31.1</span><br></pre></td></tr></table></figure><p><img src=https://ovo.btwoa.com/img/webp/202203102201089.webp></p><p><img src=https://ovo.btwoa.com/img/webp/202203102204314.webp></p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>cat /proc/mtd</span><br></pre></td></tr></table></figure><p><img src=https://ovo.btwoa.com/img/webp/202203102205689.webp></p><h2 id=备份分区><a href=#备份分区 class=headerlink title=备份分区></a>备份分区</h2><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>dd if=/dev/mtd0 of=/tmp/ALL.bin</span><br><span class=line></span><br><span class=line>dd if=/dev/mtd1 of=/tmp/Bootloader.bin</span><br><span class=line></span><br><span class=line>dd if=/dev/mtd3 of=/tmp/Eeprom.bin</span><br></pre></td></tr></table></figure><p><img src=https://ovo.btwoa.com/img/webp/202203102215425.webp></p><p>登录 FTP 并将备份文件保存到本地</p><p><a href=ftp://192.168.31.1/ >ftp://192.168.31.1</a></p><p><img src=https://ovo.btwoa.com/img/webp/202203102232119.webp></p><p><a target=_blank rel=noopener href="https://yunzhongzhuan.com/#sharefile=LHGgMTcx_36799">Xiaomi Mi Router 4C 全部分区备份</a></p><p>网上没有此类备份资源，有需要的可自行选择下载</p><h2 id=刷入-OpenWRT><a href=#刷入-OpenWRT class=headerlink title="刷入 OpenWRT"></a>刷入 OpenWRT</h2><h3 id=第一种操作><a href=#第一种操作 class=headerlink title=第一种操作></a>第一种操作</h3><p>先刷入 BREED 再刷入 OpenWRT</p><p>刷入 BREED 引导加载程序后可以实现备份及刷入路由器固件</p><p><a target=_blank rel=noopener href=https://breed.hackpascal.net/ >BREED 下载地址</a></p><p><a target=_blank rel=noopener href=https://breed.hackpascal.net/breed-mt7688-reset38.bin>Xiaomi Mi Router 4C BREED 下载地址</a></p><p>将 breed-mt7688-reset38.bin 上传至 &#x2F;tmp 目录</p><p><img src=https://ovo.btwoa.com/img/webp/202203102237992.webp></p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>mtd write /tmp/breed-mt7688-reset38.bin Bootloader</span><br></pre></td></tr></table></figure><p><img src=https://ovo.btwoa.com/img/webp/202203102242702.webp></p><h4 id=复位启动进入-BREED><a href=#复位启动进入-BREED class=headerlink title="复位启动进入 BREED"></a>复位启动进入 BREED</h4><p>断电，长按复位键接通电源，电源灯显示黄色，网络灯显示蓝色，一同闪烁多次后松开复位键，即可进入</p><p><img src=https://ovo.btwoa.com/img/webp/202203102326711.webp></p><p><a target=_blank rel=noopener href="https://yunzhongzhuan.com/#sharefile=5R0jbDcj_36795">OpenWRT个人编译版</a></p><p>这是我收集的第三方 OpenWRT 固件</p><p>自行选择刷入版本（OpenWRT 官方版与 BREED 存在未知冲突，不推荐刷入，有大佬懂这方面知识可以向我留言，我想请教请教）</p><p><img src=https://ovo.btwoa.com/img/webp/202203111512344.webp></p><p><img src=https://ovo.btwoa.com/img/webp/202203111517834.webp></p><p><img src=https://ovo.btwoa.com/img/webp/202203111517712.webp></p><p><img src=https://ovo.btwoa.com/img/webp/202203111517583.webp></p><p>刷入完成，等待显示灯转为蓝色</p><p>192.168.1.1</p><p><img src=https://ovo.btwoa.com/img/webp/202203111519341.webp></p><h4 id=恢复官方固件><a href=#恢复官方固件 class=headerlink title=恢复官方固件></a>恢复官方固件</h4><p>再次复位启动进入 BREED</p><p>192.168.1.1</p><p><img src=https://ovo.btwoa.com/img/webp/202203111047634.webp></p><p>固件更新 -&gt; 编程器固件 选择之前备份的ALL.bin</p><p><img src=https://ovo.btwoa.com/img/webp/202203111048565.webp></p><p><img src=https://ovo.btwoa.com/img/webp/202203111049131.webp></p><p><img src=https://ovo.btwoa.com/img/webp/202203111049380.webp></p><p>更新完成，等待显示灯转为蓝色</p><p>192.168.31.1</p><p><img src=https://ovo.btwoa.com/img/webp/202203111049462.webp></p><h3 id=openwrt-官网步骤><a href=#openwrt-官网步骤 class=headerlink title="openwrt 官网步骤"></a>openwrt 官网步骤</h3><p><a target=_blank rel=noopener href=https://openwrt.org/toh/xiaomi/xiaomi_mi_router_4c>Xiaomi Mi Router 4C openwrt 介绍页面</a></p><p><a target=_blank rel=noopener href=https://downloads.openwrt.org/releases/21.02.2/targets/ramips/mt76x8/openwrt-21.02.2-ramips-mt76x8-xiaomi_mi-router-4c-squashfs-sysupgrade.bin>Xiaomi Mi Router 4C openwrt 下载地址</a></p><p>将 openwrt-21.02.2-ramips-mt76x8-xiaomi_mi-router-4c-squashfs-sysupgrade.bin 上传至 &#x2F;tmp 目录</p><p><img src=https://ovo.btwoa.com/img/webp/202203102302556.webp></p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>mtd -r write /tmp/openwrt-21.02.2-ramips-mt76x8-xiaomi_mi-router-4c-squashfs-sysupgrade.bin OS1</span><br></pre></td></tr></table></figure><p><img src=https://ovo.btwoa.com/img/webp/202203111011000.webp></p><p><img src=https://ovo.btwoa.com/img/webp/202203111012647.webp></p><h4 id=openwrt-主题><a href=#openwrt-主题 class=headerlink title="openwrt 主题"></a>openwrt 主题</h4><p><a target=_blank rel=noopener href=https://github.com/jerrykuku/luci-theme-argon>argon</a></p><p><a target=_blank rel=noopener href=https://github.com/xiaoqingfengATGH/luci-theme-infinityfreedom>infinityfreedom</a></p><p>WinSCP 上传相应 *.ipk</p><p><img src=https://ovo.btwoa.com/img/webp/202203111130377.webp></p><p>安装相应 *.ipk</p><p><img src=https://ovo.btwoa.com/img/webp/202203111133440.webp></p><p><img src=https://ovo.btwoa.com/img/webp/202203111133341.webp></p><link rel=stylesheet href=/css/spoiler.css type=text/css><script src=/js/spoiler.js type=text/javascript async></script></div></article></main><footer><div class=paginator><a class=prev href=/f8f1c502/ >PREV</a><a class=next href=/2d790689/ >NEXT</a></div><div id=tcomment></div><script src=/js/twikoo.all.min.js></script><script>twikoo.init({envId:"https://twikoo.btwoa.com/",el:"#tcomment",path:"window.location.pathname",lang:"zh-CN"})</script><div class=copyright><p>Copyright Ⓒ 2019-2022 <a href=https://beian.miit.gov.cn/ target=_blank>陇ICP备20001210号</a></p></div></footer></div><script>!function(e,a,t,g,n,o){e.GoogleAnalyticsObject=g,e.ga||(e.ga=function(){(e.ga.q=e.ga.q||[]).push(arguments)}),e.ga.l=+new Date,n=a.createElement(t),o=a.getElementsByTagName(t)[0],n.src="/js/google-analytics.js",o.parentNode.insertBefore(n,o)}(window,document,"script","ga"),ga("create","UA-235222810-1","auto"),ga("send","pageview")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?01b308cf7144f10b91966ae6f284d4cb",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><script>!function(t){"use strict";function s(){e.LA.ids.push(i)}var e=window,c=document,i=t,o="".concat("https:"===c.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),n=c.createElement("script"),c=c.getElementsByTagName("script")[0];n.type="text/javascript",n.setAttribute("charset","UTF-8"),n.async=!0,n.src=o,n.id="LA_COLLECT",i.d=n,e.LA?e.LA.ids&&s():(e.LA=t,e.LA.ids=[],s()),c.parentNode.insertBefore(n,c)}({id:"JoXIxCzhNG7DwlUJ",ck:"JoXIxCzhNG7DwlUJ"})</script><script>!function(e,n){var t=n.createElement("script"),n=n.getElementsByTagName("script")[0];t.type="text/javascript",t.crossorigin=!0,t.onload=function(){(new e.LingQue.Monitor).init({id:"JoewdpDnTBrOF23U",sendSuspicious:!0,sendSpaPv:!0})},n.parentNode.insertBefore(t,n),t.src="https://sdk.51.la/perf/js-sdk-perf.min.js"}(window,document)</script><script defer=defer src=/js/bootstrap.min.js type=text/javascript></script><script defer=defer src=/js/console.js type=text/javascript></script><!-- hexo injector body_end start --><script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")})</script><!-- hexo injector body_end end --></body></html>